import{r as u,o as w,a as _,b as s,c as i,f as e,t as a,g as k,v as C,h as z,F as B,j,i as h,k as g,n as P,e as b}from"./app-DO9d76PO.js";/* empty css                                                                   */import{P as A}from"./Paginator-BLNNhI4l.js";import{S as l}from"./sweetalert2.all-DmaSrZTC.js";import F from"./ViewForm-B7SlS9_a.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-CW1cnaS1.js";const E={class:""},T={class:"block bg-white rounded min-w-full min-h-screen p-2"},S={hidden:""},V={class:"min-w-screen min-h-full overflow-auto p-2"},D={class:"w-full whitespace-no-wrap"},N=e("thead",null,[e("tr",{class:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-500"},[e("th",{class:"border-b-2 border-gray-200 px-5 py-3 text-left"},"Applicant"),e("th",{class:"border-b-2 border-gray-200 px-5 py-3 text-left"},"Owner"),e("th",{class:"border-b-2 border-gray-200 px-5 py-3 text-left"},"Location"),e("th",{class:"border-b-2 border-gray-200 px-5 py-3 text-left"},"Status"),e("th",{class:"border-b-2 border-gray-200 px-5 py-3 text-left"},"Actions")])],-1),R={class:"border-b border-gray-200 px-5 py-5 text-sm"},Y={class:"border-b border-gray-200 px-5 py-5 text-sm"},$={class:"border-b border-gray-200 px-5 py-5 text-sm"},L={class:"border-b border-gray-200 px-5 py-5 text-sm"},M={class:"border-b border-gray-200 px-5 py-5 text-sm flex space-x-2"},H={class:"inline-flex space-x-2"},I=["onClick"],O=e("i",{class:"fa fa-thumbs-up"},null,-1),U=["onClick"],Z=e("i",{class:"fa fa-thumbs-down"},null,-1),q={key:1},G=e("td",{colspan:"5",class:"border-b text-center font-bold text-lg border-gray-200 bg-white px-5 py-5"},[e("p",{class:"text-red-500 whitespace-no-wrap"}," No Data Found! ")],-1),J=[G],K={class:"flex w-full overflow-auto"},ne={__name:"PendingList",setup(Q){const p=u(0),c=u([]),n=u({page_num:1,total_pages:0,total:0,search:"",itemsperpage:10});w(()=>{d()});const d=async()=>{try{const o=await _.post(route("zoning.pending.list"),n.value);c.value=o.data}catch(o){console.error("Error fetching zoning permits:",o)}},m=o=>{n.value.page_num=o??1,d()},x=o=>{switch(o){case 1:return"Pending";case 2:return"Approved";case 3:return"Rejected"}},f=async o=>{try{(await l.fire({title:"Are you sure?",text:"You are about to approve this zoning permit.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, approve it!"})).isConfirmed&&(await _.put(route("zoning.approve",o)),l.fire("Approved!","The zoning permit has been approved.","success"),d())}catch(r){console.error("Error approving zoning permit:",r),l.fire("Error!","Failed to approve the zoning permit.","error")}},y=async o=>{try{(await l.fire({title:"Are you sure?",text:"You are about to reject this zoning permit.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, reject it!"})).isConfirmed&&(await _.put(route("zoning.reject",o)),l.fire("Rejected!","The zoning permit has been rejected.","success"),d())}catch(r){console.error("Error rejecting zoning permit:",r),l.fire("Error!","Failed to reject the zoning permit.","error")}};return(o,r)=>(s(),i("div",E,[e("div",T,[e("p",S,a(p.value=o.$page.props.auth.user.role)+" Plus 1 Happy kaarawan",1),k(e("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=t=>n.value.search=t),onInput:r[1]||(r[1]=z(t=>d(),["prevent"])),placeholder:"Search Zoning Permits",class:"mt-1 mb-4 p-2 border rounded w-full text-black"},null,544),[[C,n.value.search]]),e("div",V,[e("table",D,[N,e("tbody",null,[c.value.total_pages?(s(!0),i(B,{key:0},j(c.value.data,t=>(s(),i("tr",{key:t.id,class:"text-gray-700"},[e("td",R,a(t.first_name)+" "+a(t.middle_name)+" "+a(t.last_name),1),e("td",Y,a(t.owner_name),1),e("td",$,a(t.location_of_lot),1),e("td",L,[e("span",{class:P({"text-green-600":t.status_id===2,"text-red-600":t.status_id===3,"text-yellow-600":t.status_id===1})},a(x(t.status_id)),3)]),e("td",M,[e("div",H,[t.status_id===1&&p.value==1?(s(),i("button",{key:0,onClick:v=>f(t.id),class:"px-3 py-1 bg-green-500 text-white rounded"},[O,b(" Approve ")],8,I)):g("",!0),t.status_id===1&&p.value==1?(s(),i("button",{key:1,onClick:v=>y(t.id),class:"px-3 py-1 bg-red-500 text-white rounded"},[Z,b(" Reject ")],8,U)):g("",!0),(s(),h(F,{key:t.id,data:t},null,8,["data"]))])])]))),128)):(s(),i("tr",q,J))])])]),e("div",K,[c.value.total>0?(s(),h(A,{key:0,page_number:n.value.page_num,total_rows:c.value.total??0,itemsperpage:n.value.itemsperpage,onPage_num:m},null,8,["page_number","total_rows","itemsperpage"])):g("",!0)])])]))}};export{ne as default};
